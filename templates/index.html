<!doctype html>
<html>

<head>
    <meta charset="utf-8">

    <link rel="icon" type="text/css" href="{{ url_for('static', filename='images/favicon.ico') }}" />

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/main.css') }}" />

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/main.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/tableview.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/scrollbar.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/modal.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/toolbar.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/tab.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/tablefixed.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/content.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/collapsible.css') }}" />

    <style>
        textarea {
            resize: none;
        }
    </style>

    <script type="text/javascript" src="{{ npm_url_for(component='pdfjs-dist', filename='build/pdf.min.js') }}"></script>
    <script type="text/javascript" id="pdf-js-worker" src="{{ npm_url_for(component='pdfjs-dist', filename='build/pdf.worker.min.js') }}"></script>

    <script src="{{ url_for('static', filename='javascripts/util/fileutil.js') }}"></script>
    <script src="{{ url_for('static', filename='javascripts/util/couchdb.js') }}"></script>
    <script src="{{ url_for('static', filename='javascripts/util/templates.js') }}"></script>
    <script src="{{ url_for('static', filename='javascripts/gui/tableview.js') }}"></script>
    <script src="{{ url_for('static', filename='javascripts/gui/pdfview.js') }}"></script>

    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = document.getElementById("pdf-js-worker").getAttribute("src");
    </script>

</head>

<body style="overflow: hidden;">
     <!-- templates -->
    <script type="text/template" data-template="keyword-entry">
        <div id="keyword-${id}" class="keyword-entry">
            <input type="text" class="${corpus}-keyword-entry" style="height:28px"/>
            <input type="image" src="{{url_for( 'static', filename='images/trash.svg')}}"
                   style="height:24px; width:24px; margin:2px; margin-left:4px; float: right"  
                   onclick="deleteKeyword('keyword-${id}')"/>
        </div>
    </script>
    
    <script type="text/template" data-template="entry-details">
        <div style="margin: 0 auto; margin-top: 6px; text-align:left; overflow:hidden; ">
            <div style="position:absolute; margin:5px; top:0px; bottom:600px; width:565px;">
                <label style="color:navy; font-size:12px; margin-bottom:10px;">ID: ${id}</label>
                <h2 style="color:black; font-size:12px; font-weight: bold">${title}</h2>
                <p style="color:black; font-size:12px; font-weight: bold; margin-top:15px;">Attachment</p>
                <div style="color:black; font-size:12px; margin-left:20px; margin-top:-10px;">
                    <table>
                        <tr>
                            <td><b>Name</b></td>
                            <td>${name}</td>
                        </tr>
                        <tr>
                            <td><b>Mime/Type</b></td>
                            <td>${content_type}</td>
                        </tr>
                        <tr>
                            <td><b>Length</b></td>
                            <td>${length}</td>
                        </tr>
                    </table>
                </div>

                <div style="font-size:12px; margin-top:20px;">
                    <hr/>
                    <div style="font-size:12px; margin-top:20px; overflow-y: auto;">
                        <p>${description}</p>
                    </div>
                </div>
            </div>
            <div style="position:absolute; margin:5px; bottom:0px; height:480px; width:565px;">
                <hr/>
                <div id="pdf-view-container" style="top:10px; left:0px; right:0px; margin-left:2px; margin-right:4px; height:440px; border: 1px solid rgba(0,0,0, 0.2); text-align: center">
                    <canvas id="pdf-view" style="margin:10px;"></canvas>
                </div>
            </div>
            <div  style="position:absolute; bottom:10px; height:16px; width:565px;">
                <span style="float:right;">
                    <img id="view-attachment" class="menu-item" style="margin-right:5px;" src="{{url_for( 'static', filename='images/expand.svg')}}" width="16" height="16" />
                    <img id="edit-document" class="menu-item" src="{{url_for( 'static', filename='images/edit.svg')}}" width="16" height="16" /> 
                </span>
            </div>
        <div>
    
    </script>

    <!-- dialogs -->
    <dialog id="connect-dialog" class="dialog message-dialog" style="min-width:400px;">
        <img src="{{url_for( 'static', filename='images/connect.svg')}}" width="48" height="48" style="float: left;" />
        <p style="font-size: 18px; font-weight: bold;">Enter the CouchDB URL</p>
        <input class="modal-entry" id="couchdb-url" type="text" name="couchdb-url"
            placeholder="http://userid:password@localhost:5984">
        </input>

        <div id="connect-message" style="color:rgba(255,0,0,0.6); width:300px; float:left; font-size: 12px; margin-top:8px;"></div>

        <button id="ok-connect-dialog" class="message-dialog-small-button"
            style="float: right; margin-top:10px;">Connect</button>

        <button id="connect-cancel-dialog" class="closeButton message-dialog-small-cancel-button"
            style="float: right; margin-top:10px; visibility: hidden;">Cancel</button>

        
        </div>
    </dialog>

    <dialog id="wait-dialog" class="dialog" 
        style="position:absolute; width:100%; height:100%; opacity: 0.5; border: none; overflow: hidden;">
        <div style="position:absolute; width:100%; height:100%; overflow: hidden;">
            <div style="position:absolute; left: 50%; top: 45%; opacity: 1.0;">
                <div style="width:48px; height:48px; z-index: 10; opacity: 1.0;" class="waiting">
                    <img src="{{url_for( 'static', filename='images/wait.svg')}}" width="48" height="48" />                
                </div>
            </div>
        </div>
    </dialog>

    <dialog id="save-dialog" class="dialog message-dialog" style="min-width:400px;">
        <img src="{{url_for( 'static', filename='images/exclamation.svg')}}" width="48" height="48" style="float: left;" />
        <p style="font-size: 18px; font-weight: bold;">Document Saved</p>
        <form method="dialog">
            <button class="message-dialog-small-button" style="float: right;">OK</button>
        </form>
    </dialog>

    <dialog id="attachment-dialog" class="modal dialog" tabindex="-1">
        <div style="position:absolute; top:0px; bottom:0px; left:0px; right:0px;">
            <div class="modal-content" style="width:1040px; height:860px; background-color: rgb(255, 255, 255);">
                <div class="modal-header" style="background-color: black">
                    <span class="close closeButton">&times;</span>
                    <h2>Attachment View</h2>
                </div>
                <div class="modal-body">
                    <div style="text-align: center; overflow: auto; height:740px; width:1000px; border: 1px solid rgba(0,0,0, 0.2)">
                        <canvas id="attachment-view"></canvas>
                    </div>
                </div>

                <div style="text-align: center">
                    <img id="page-left" class="menu-item" style="margin-right:5px;" src="{{url_for( 'static', filename='images/page-left.svg')}}" width="32" height="32" />
                    <span style="position:relative; width:43px; text-align: center; top:-10px;">
                        <label id="pagne-no">1</label>
                    </span>
                    <img id="page-right" class="menu-item" src="{{url_for( 'static', filename='images/page-right.svg')}}" width="32" height="32" /> 
                </div>
            </div>
        </div>
    </dialog>     
                    
    <dialog id="document-dialog" class="modal dialog" tabindex="-1">
        <div style="position:absolute; top:0px; bottom:0px; left:0px; right:0px;">
            <div class="modal-content" style="width:1040px; height:860px; background-color:rgb(230, 255, 255);">
                <div class="modal-header" style="background-color: black">
                    <span class="close closeButton" id="close-add-document-dialog">&times;</span>
                    <h2>Add/Update Document</h2>
                </div>
                <div class="modal-body" style="margin-top:12px;">
                    <label class="modal-label" for="document-title" value="Title">
                        Title
                    </label>
                    <input class="modal-entry" id="document-title" type="text" name="title-entry"
                        placeholder="Title...">
                    </input>
                    <p style="height:4px;"></p>
                    <label class="modal-label" for="document-description" value="Description" style="margin-top:40px;">
                        Description
                    </label>
                    <textarea class="modal-entry" id="document-description" type="textarea" name="title-entry"
                        style="height:100px;"></textarea>

                    <div id="tabs" style="width:100%; margin-top:10px; margin-bottom:20px;">
                        <div class="tab" id="tab">
                            <button class="tablinks" id="document-tab1"
                                onclick="showTab(event, 'document-general', 'document-tab1')"
                                value="Structure">General</button>
                            <button class="tablinks" id="document-tab2"
                                onclick="showTab(event, 'document-details', 'document-tab2')"
                                value="Text">Details</button>
                            <button class="tablinks" id="document-tab3"
                                onclick="showTab(event, 'document-observations', 'document-tab3')"
                                value="Text">Observations</button>
                            <button class="tablinks" id="document-tab4"
                                onclick="showTab(event, 'document-tracking', 'document-tab4')"
                                value="Text">Tracking</button>
                        </div>
                        <div class="tabcontent background-opaque" id="document-general"
                            style="position:absolute; top:360px; left:10px; right:10px; bottom:52px; display:inline-block; font-size:14px">
                            <p></p>
                            <input class="modal-checkbox" id="document-hot-topic" type="checkbox" name="hot-topic">
                            Display in Hot Topics View
                            </input>
                            <p></p>
                            <div>
                                <input id="document-upload" type="image"
                                    src="{{url_for( 'static', filename='images/upload.svg')}}"
                                    style="height:24px; width:24px; vertical-align: text-bottom;">
                                    <label
                                    id="document-upload-label" style="font-size:14px;">No attachment
                                    uploaded...</label></input>
                            </div>
                            </input>
                            <p></p>
                            <div class="content">
                                <table style="border:none;">
                                    <tr>
                                        <td>
                                            <label class="modal-label" for="document-primary-category"
                                                value="Primary Category">
                                                Primary Category
                                            </label>
                                            <input class="modal-entry" id="document-primary-category" type="text"
                                                name="primary-category" placeholder="Primary Category...">
                                            </input>
                                        </td>
                                        <td>
                                        <td>
                                            <label class="modal-label" for="document-fic" value="FIC">
                                                FIC
                                            </label>
                                            <input class="modal-entry" id="document-fic" type="text" name="FIC"
                                                placeholder="FIC...">
                                            </input>

                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <p></p>
                            <div style="border: 1px solid rgba(0,0,0, 0.2); padding:4px; height:230px;"> 
                                <label class="modal-label" style="float:left">
                                    Keywords
                                </label>
                                <input id="add-document-keywords" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; float: right">
                                <hr style="width:100%; margin-top:30px;"></hr>
                                <div id="document-keyword-container" style="width:100%; height:178px; font-size:14px; margin-top:-4px; border: 1px solid rgba(0,0,0, 0.2); overflow:auto;">
                                    <div id="document-keywords" class="keyword-container"></div>
                                </div>
                            </div>
                        </div>

                        <div class="tabcontent background-opaque" id="document-details"
                            style="left:10px; top:360px; right:10px; bottom:52px; position:absolute;">
                            <p></p>
                            <div class="content">
                                <table style="border:none;">
                                    <tr>
                                        <td>
                                            <label class="modal-label" for="document-author" value="author">
                                                Author
                                            </label>
                                            <input class="modal-entry" id="document-author" type="text" name="Author"
                                                placeholder="Author...">
                                            </input>
                                            </t>
                                        <td>
                                            <label class="modal-label" for="document-primary-category"
                                                value="Publisher/s">
                                                Publisher/s
                                            </label>
                                            <input class="modal-entry" id="document-publisher" type="text"
                                                name="publisher" placeholder="Publisher...">
                                            </input>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="modal-label" for="document-activity-region"
                                                value="document-activity-region">
                                                Activity Region
                                            </label>
                                            <input class="modal-entry" id="document-activity-region" type="text"
                                                name="document-activity-region" placeholder="Activity Region...">
                                            </input>
                                            </t>
                                        <td>
                                            <label class="modal-label" for="document-country-of-origin"
                                                value="Country Of Origin">
                                                Country Of Origin
                                            </label>
                                            <input class="modal-entry" id="document-country-of-origin" type="text"
                                                name="country-of-origin" placeholder="Country of Origin...">
                                            </input>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="modal-label" for="document-activity-location"
                                                value="document-activity-region">
                                                Activity Location
                                            </label>
                                            <input class="modal-entry" id="document-activity-location" type="text"
                                                name="activity-location" placeholder="Activity Location...">
                                            </input>
                                        </td>

                                        <td>
                                            <label class="modal-label" for="document-page"
                                                value="document-page">
                                                Page
                                            </label>
                                            <input class="modal-entry" id="document-page" type="text"
                                                name="page" placeholder="Page Number...">
                                            </input>
                                        </td>

                                    </tr>

                                    <tr>
                                        <td>
                                            <label class="modal-label" for="document-activity-unit"
                                                value="document-activity-unit">
                                                Activity Unit
                                            </label>
                                            <input class="modal-entry" id="document-activity-unit" type="text"
                                                name="document-activity-unit" placeholder="Activity Unit...">
                                            </input>
                                        </td>
                                        <td>
                                            <label class="modal-label" for="document-version"
                                                value="document-version">
                                                Version
                                            </label>
                                            <input class="modal-entry" id="document-version" type="text"
                                                name="version" placeholder="Version...">
                                            </input>
                                        </td>

                                    </tr>

                                    <tr>
                                        <td>
                                            <label class="modal-label" for="document-creation-date"
                                                value="creation-date">
                                                Creation Date
                                            </label>
                                            <input class="modal-entry" id="document-creation-date" type="date"
                                                name="creation-date">
                                            </input>
                                        </td>
                                        <td>
                                            <label class="modal-label" for="document-publication-date"
                                                value="publication-date">
                                                Publication Date
                                            </label>
                                            <input class="modal-entry" id="document-publication-date" type="date"
                                                name="publication-date">
                                            </input>
                                        </td>

                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="tabcontent background-opaque" id="document-observations"
                            style="left:10px;  top:360px; right:10px; bottom:52px; position:absolute;">
                            
                            <div style="padding:4px; height:32px;"> 
                                <input id="add-document-observations" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; margin-top:-2px; float: right">
                            </div>

                            <div class="tableFixHead" style="height:364px; border: 1px solid rgba(0,0,0, 0.2); ">
                                <table id="document-observations-table">
                                    <thead style="margin:4px; background-color: white;">
                                        <tr>
                                            <th class="th-sm">Date</th>
                                            <th class="th-sm">Title</th>
                                            <th class="th-sm" style="width:600px">Description</th>
                                            <th class="th-sm">Reference</th>
                                        </tr>
                                    </thead>
                                    <tbody table-view>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="tabcontent background-opaque" id="document-tracking"
                            style="left:10px;  top:360px; right:10px; bottom:52px; position:absolute;">
                            <div style="padding:4px; height:32px;"> 
                                <input id="add-document-observations" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; margin-top:-2px; float: right">
                            </div>

                            <div class="tableFixHead" style="height:364px; border: 1px solid rgba(0,0,0, 0.2); ">
                                <table id="document-tracking-table">
                                    <thead style="margin:4px; background-color: white;">
                                        <tr>
                                            <th class="th-sm">Date</th>
                                            <th class="th-sm">Name</th>
                                            <th class="th-sm" style="width:600px">Comments</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-view">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="position:absolute; bottom:0px; left:10px; margin-top:30px; margin:10px;">
                    <button class="modal-btn" id="save-document">Save</button>
                    <button class="closeButton modal-cancel-btn" id="cancel-document">Cancel</button>
                </div>
            </div>
        </div>
    </dialog>

    <dialog id="observation-dialog" class="modal dialog" tabindex="-1">
        <div style="position:absolute; top:0px; bottom:0px; left:0px; right:0px;">
            <div class="modal-content" style="width:1040px; height:860px; background-color:rgb(255, 255, 230);">
                <div class="modal-header" style="background-color: black">
                    <span class="close closeButton" id="close-add-document-dialog">&times;</span>
                    <h2>Add/Updated Observation</h2>
                </div>
                <div class="modal-body" style="margin-top:12px;">
                    <label class="modal-label" for="observation-title" value="Title">
                        Title
                    </label>
                    <input class="modal-entry" id="observation-title" type="text" name="observation-title"
                        placeholder="Title...">
                    </input>
                    <p style="height:2px;"></p>
                    <label class="modal-label" for="observation-description" value="observation-description"
                        style="margin-top:40px;">
                        Description
                    </label>
                    <textarea class="modal-entry" id="observation-description" type="textarea"
                        name="observation-description" style="height:100px;"></textarea>

                    <label class="modal-label" for="observation-recommendation" value="observation-recommendation"
                        style="margin-top:40px;">
                        Recommendation
                    </label>
                    <input class="modal-entry" id="observation-recommendation" type="text" name="title-recommendation">
                    </input>

                    <div id="tabs" style="width:100%; margin-top:10px; margin-bottom:20px;">
                        <div class="tab" id="tab">
                            <button class="tablinks" id="observation-tab1"
                                onclick="showTab(event, 'observation-general', 'observation-tab1')"
                                value="Structure">General</button>
                            <button class="tablinks" id="observation-tab2"
                                onclick="showTab(event, 'observation-details', 'observation-tab2')"
                                value="Text">Details</button>
                            <button class="tablinks" id="observation-tab3"
                                onclick="showTab(event, 'related-observations', 'observation-tab3')"
                                value="Text">Related Observations</button>
                            <button class="tablinks" id="observation-tab4"
                                onclick="showTab(event, 'observation-insights', 'observation-tab4')"
                                value="Text">Insights</button>
                            <button class="tablinks" id="observation-tab5"
                                onclick="showTab(event, 'observation-lessons', 'observation-tab5')"
                                value="Text">Lessons</button>
                            <button class="tablinks" id="observation-tab6"
                                onclick="showTab(event, 'observation-tracking', 'observation-tab6')"
                                value="Text">Tracking</button>
                        </div>
                        <div class="tabcontent background-opaque" id="observation-general"
                            style="position:absolute; top:410px; left:10px; right:10px; bottom:45px; display:inline-block; font-size:14px">
                            <p></p>
                            <input class="modal-checkbox" id="observation-hot-topics" type="checkbox" name="hot-topics">
                            Display in Hot Topics View
                            </input>
                            <p></p>

                            <p></p>
                            <div class="content">
                                <table style="border:none;">
                                    <tr>
                                        <td>
                                            <label class="modal-label" for="observation-primary-category"
                                                value="Primary Category">
                                                Primary Category
                                            </label>
                                            <input class="modal-entry" id="observation-primary-category" type="text"
                                                name="primary-category" placeholder="Primary Category...">
                                            </input>
                                        </td>
                                        <td>
                                        <td>
                                            <label class="modal-label" for="observation-fic" value="FIC">
                                                FIC
                                            </label>
                                            <input class="modal-entry" id=observation-fic" type="text" name="FIC"
                                                placeholder="FIC...">
                                            </input>

                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <p></p>
                            <div>
                                <div style="border: 1px solid rgba(0,0,0, 0.2); padding:4px; height:225px;"> 
                                    <label class="modal-label" style="float:left">
                                        Keywords
                                    </label>
                                    <input id="add-observation-keywords" type="image"
                                    src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                    style="height:24px; width:24px; float: right">
                                    <hr style="width:100%; margin-top:30px;"></hr>
                                   <div id="observation-keyword-container" style="width:100%; height:175px; font-size:14px; margin-top:-4px; border: 1px solid rgba(0,0,0, 0.2); overflow:auto;">
                                        <div id="observation-keywords" class="keyword-container">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tabcontent background-opaque" id="observation-details"
                            style="left:10px; top:410px; right:10px; bottom:45px; position:absolute;">
                            <p></p>
                            <div class="content">
                                <table style="border:none;">
                                    <tr>
                                        <td>
                                            <label class="modal-label" for="observation-unit-poc" value="unit-poc">
                                                Unit POC (Name)
                                            </label>
                                            <input class="modal-entry" id="observation-unit-poc" type="text"
                                                name="Author" placeholder="Unit Poc Name">
                                            </input>
                                            </t>
                                        <td>
                                            <label class="modal-label" for="observation-unit-poc-appt"
                                                value="Publisher/s">
                                                Unit POC (Appt)
                                            </label>
                                            <input class="modal-entry" id="observation-unit-poc-appt" type="text"
                                                name="unit-poc-appt" placeholder="Unit OC (Appt)">
                                            </input>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="modal-label" for="observation-activity-region"
                                                value="activity-region">
                                                Activity Region
                                            </label>
                                            <input class="modal-entry" id=observation-activity-region" type="text"
                                                name="activity-region" placeholder="Activity Region...">
                                            </input>
                                            </t>
                                        <td>
                                            <label class="modal-label" for="observation-deployment-phase"
                                                value="Deployment Phase">
                                                Deployment Phase
                                            </label>
                                            <input class="modal-entry" id="observation-deployment-phase" type="text"
                                                name="deployment-phase" placeholder="Deployment Phase...">
                                            </input>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="modal-label" for="observation-activity-location"
                                                value="activity-location">
                                                Activity Location
                                            </label>
                                            <input class="modal-entry" id="observation-activity-location" type="text"
                                                name="activity-location" placeholder="Activity Location...">
                                            </input>
                                        </td>

                                    </tr>

                                    <tr>
                                        <td>
                                            <label class="modal-label" for="observation-activity-unit"
                                                value="activity-unit">
                                                Activity Unit
                                            </label>
                                            <input class="modal-entry" id="observation-activity-unit" type="text"
                                                name="observation-activity-unit" placeholder="Activity Unit...">
                                            </input>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                            <label class="modal-label" for="observation-entered-date"
                                                value="date-entered">
                                                Date Entered
                                            </label>
                                            <input class="modal-entry" id="observation-entered-date"" type="date"
                                                name="entered-date">
                                            </input>
                                        </td>

                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="tabcontent background-opaque" id="related-observations"
                            style="left:10px;  top:410px; right:10px; bottom:45px; position:absolute;">           
                            <div style="padding:4px; height:32px; margin-top:4px;"> 
                                <input id="add-related-observation" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; float: right">
                            </div>

                            <div class="tableFixHead" style="height:315px; border: 1px solid rgba(0,0,0, 0.2); ">
                                <table id="related-observation-table">
                                    <thead style="margin:4px; background-color: white;">
                                        <tr>
                                            <th class="th-sm">Date</th>
                                            <th class="th-sm">Title</th>
                                            <th class="th-sm" style="width:600px">Description</th>
                                            <th class="th-sm">Reference</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-view">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="tabcontent background-opaque" id="observation-insights"
                            style="left:10px;  top:410px; right:10px; bottom:45px; position:absolute;">
                            <div style="padding:4px; height:32px; margin-top:4px;"> 
                                <input id="add-observation-insight" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; float: right">
                            </div>

                            <div class="tableFixHead" style="height:315px; border: 1px solid rgba(0,0,0, 0.2); ">
                                  <table id="observation-insights-table">
                                    <thead style="margin:4px; background-color: white;">
                                        <tr>
                                            <th class="th-sm">Title</th>
                                            <th class="th-sm" style="width:600px">Description</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-view">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="tabcontent background-opaque" id="observation-lessons"
                            style="left:10px; top:410px; right:10px; bottom:45px; position:absolute;">
                            <div style="padding:4px; height:32px; margin-top:4px;"> 
                                <input id="add-observation-lesson" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; float: right">
                            </div>

                            <div class="tableFixHead" style="height:315px; border: 1px solid rgba(0,0,0, 0.2); ">
                                  <table id="observation-lesson-table">
                                    <thead style="margin:4px; background-color: white;">
                                        <tr>
                                            <th class="th-sm">Title</th>
                                            <th class="th-sm" style="width:600px">Description</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-view">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="tabcontent background-opaque" id="observation-tracking"
                            style="left:10px; top:410px; right:10px; bottom:45px; position:absolute;">
                            <div style="padding:4px; height:32px; margin-top:4px;"> 
                                <input id="add-observation-track" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; float: right">
                            </div>

                            <div class="tableFixHead" style="height:315px; border: 1px solid rgba(0,0,0, 0.2); ">
                                <table id="observation-tracking-table">
                                    <thead style="margin:4px; background-color: white;">
                                        <tr>
                                            <th class="th-sm">Date</th>
                                            <th class="th-sm">Name</th>
                                            <th class="th-sm" style="width:600px">Comments</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-view">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="position:absolute; bottom:0px; left:10px; margin-top:30px; margin:10px;">
                    <button class="modal-btn" id="save-observation">Save</button>
                    <button class="closeButton modal-cancel-btn" id="cancel-observation">Cancel</button>
                </div>
            </div>
        </div>
    </dialog>

    <dialog id="lesson-dialog" class="modal dialog" tabindex="-1">
        <div style="position:absolute; top:0px; bottom:0px; left:0px; right:0px;">
            <div class="modal-content" style="width:1040px; height:860px; background-color:rgb(255, 235, 230);">
                <div class="modal-header" style="background-color: black">
                    <span class="close closeButton" id="close-add-document-dialog">&times;</span>
                    <h2>Add/Update Lesson</h2>
                </div>
                <div class="modal-body" style="margin-top:12px;">
                    <label class="modal-label" for="lesson-title-" value="Title">
                        Title
                    </label>
                    <input class="modal-entry" id="lesson-title" type="text" name="title-entry"
                        placeholder="Title...">
                    </input>
                    <p style="height:2px;"></p>
                    <label class="modal-label" for="lesson-description" value="Description"
                        style="margin-top:40px;">
                        Description
                    </label>
                    <textarea class="modal-entry" id="lesson-description" type="textarea" name="title-entry"
                        style="height:100px;"></textarea>

                    <label class="modal-label" for="lesson-solution" value="Solution" style="margin-top:40px;">
                        Solution
                    </label>
                    <textarea class="modal-entry" id="lesson-solutio" type="textarea"
                        name="lesson-solution-entry" style="height:60px;">
                    </textarea>

                    <div id="tabs" style="width:100%; margin-top:10px; margin-bottom:20px;">
                        <div class="tab" id="tab">
                            <button class="tablinks" id="lesson-tab1"
                                onclick="showTab(event, 'lesson-general', 'lesson-tab1')"
                                value="Structure">General</button>
                            <button class="tablinks" id="lesson-tab2"
                                onclick="showTab(event, 'lesson-observations', 'lesson-tab2')"
                                value="Text">Observations</button>
                            <button class="tablinks" id="lesson-tab3"
                                onclick="showTab(event, 'lesson-insights', 'lesson-tab3')"
                                value="Text">Insights</button>
                            <button class="tablinks" id="lesson-tab4"
                                onclick="showTab(event, 'lesson-tracking', 'lesson-tab4')"
                                value="Text">Tracking</button>
                        </div>
                        <div class="tabcontent background-opaque" id="lesson-general"
                            style="position:absolute; top:450px; left:10px; right:10px; bottom:45px; display:inline-block; font-size:14px">
                            <p></p>
                            <input class="modal-checkbox" id="insight-hot-topic" type="checkbox" name="hot-topic">
                            Display in Hot Topics View
                            </input>

                            <p></p>

                            <div class="content">
                                <table style="border:none;">
                                    <tr>
                                        <td>
                                            <label class="modal-label" for="lesson-primary-category"
                                                value="Primary Category">
                                                Primary Category
                                            </label>
                                            <input class="modal-entry" id="lesson-primary-category" type="text"
                                                name="primary-category" placeholder="Primary Category...">
                                            </input>
                                        </td>
                                        <td>
                                        <td>
                                            <label class="modal-label" for="lesson-fic" value="FIC">
                                                FIC
                                            </label>
                                            <input class="modal-entry" id=lesson-fic" type="text" name="FIC"
                                                placeholder="FIC...">
                                            </input>

                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <p></p>
                            <div>
                                <div style="border: 1px solid rgba(0,0,0, 0.2); padding:4px; height:185px;"> 
                                    <label class="modal-label" style="float:left">
                                        Keywords
                                    </label>
                                    <input id="add-lesson-keywords" type="image"
                                    src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                    style="height:24px; width:24px; float: right">
                                    <hr style="width:100%; margin-top:30px;"></hr>
                                    <div id="lesson-keyword-container" style="width:100%; height:134px; font-size:14px; margin-top:-4px; border: 1px solid rgba(0,0,0, 0.2); overflow:auto;">
                                        <div id="lesson-keywords" class="keyword-container"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tabcontent background-opaque" id="lesson-observations"
                            style="left:10px;  top:450px; right:10px; bottom:45px; position:absolute;">
                            <div style="padding:4px; height:32px; margin-top:-4px"> 
                                <input id="add-lesson-observation" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; float: right">
                            </div>

                            <div class="tableFixHead" style="height:285px; border: 1px solid rgba(0,0,0, 0.2); ">
                                <table id="lesson-observations-table">
                                    <thead style="margin:4px; background-color: white;">
                                        <tr>
                                            <th class="th-sm">Date</th>
                                            <th class="th-sm">Title</th>
                                            <th class="th-sm" style="width:600px">Description</th>
                                            <th class="th-sm">Reference</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="tabcontent background-opaque" id="lesson-insights"
                            style="left:10px;  top:450px; right:10px; bottom:45px; position:absolute;">
                            <div style="padding:4px; height:32px; margin-top:-4px"> 
                                <input id="add-lesson-insight" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; float: right">
                            </div>

                            <div class="tableFixHead" style="height:285px; border: 1px solid rgba(0,0,0, 0.2); ">
                                 <table id="lesson-insights-table">
                                    <thead style="margin:4px; background-color: white;">
                                        <tr>
                                            <th class="th-sm">Title</th>
                                            <th class="th-sm" style="width:600px">Description</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-view">
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="tabcontent background-opaque" id="lesson-tracking"
                            style="left:10px; top:450px; right:10px; bottom:45px; position:absolute;">
                            <div style="padding:4px; height:32px; margin-top:-4px"> 
                                <input id="add-lesson-track" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; float: right">
                            </div>

                            <div class="tableFixHead" style="height:285px; border: 1px solid rgba(0,0,0, 0.2); "> 
                                <table id="lesson-tracking-table">
                                    <thead style="margin:4px; background-color: white;">
                                        <tr>
                                            <th class="th-sm">Date</th>
                                            <th class="th-sm">Name</th>
                                            <th class="th-sm" style="width:600px">Comments</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-view">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="position:absolute; bottom:0px; left:10px; margin-top:30px; margin:10px;">
                    <button class="modal-btn" id="update-lesson">Save</button>
                    <button class="closeButton modal-cancel-btn" id="cancel-lesson">Cancel</button>
                </div>
            </div>
        </div>
    </dialog>

    <dialog id="insight-dialog" class="modal dialog" tabindex="-1">
        <div style="position:absolute; top:0px; bottom:0px; left:0px; right:0px;">
            <div class="modal-content" style="width:1040px; height:860px; background-color:rgb(230, 255, 242);">
                <div class="modal-header" style="background-color: black">
                    <span class="close closeButton" id="close-add-document-dialog">&times;</span>
                    <h2>Add/Update Insight</h2>
                </div>
                <div class="modal-body" style="margin-top:12px;">
                    <label class="modal-label" for="insight-title-entry" value="Title">
                        Title
                    </label>
                    <input class="modal-entry" id="insight-title-entry" type="text" name="title-entry"
                        placeholder="Title...">
                    </input>
                    <p style="height:2px;"></p>
                    <label class="modal-label" for="insight-description-entry" value="Description"
                        style="margin-top:40px;">
                        Description
                    </label>
                    <textarea class="modal-entry" id="insight-description-entry" type="textarea" name="title-entry"
                        style="height:100px;"></textarea>

                    <div id="tabs" style="width:100%; margin-top:10px; margin-bottom:20px;">
                        <div class="tab" id="tab">
                            <button class="tablinks" id="insight-tab1"
                                onclick="showTab(event, 'insight-general', 'insight-tab1')"
                                value="Structure">General</button>
                            <button class="tablinks" id="insight-tab2"
                                onclick="showTab(event, 'insight-observations', 'insight-tab2')"
                                value="Text">Observations</button>
                            <button class="tablinks" id="insight-tab3"
                                onclick="showTab(event, 'insight-lessons', 'insight-tab3')"
                                value="Text">Lessons</button>
                            <button class="tablinks" id="insight-tab4"
                                onclick="showTab(event, 'insight-tracking', 'insight-tab4')"
                                value="Text">Tracking</button>
                        </div>
                        <div class="tabcontent background-opaque" id="insight-general"
                            style="position:absolute; top:360px; left:10px; right:10px; bottom:45px; display:inline-block; font-size:14px">
                            <p></p>
                            <input class="modal-checkbox" id="insight-hot-topics" type="checkbox" name="hot-topics">
                            Display in Hot Topics View
                            </input>
                            <p></p>
                            <div class="content">
                                <table style="border:none;">
                                    <tr>
                                        <td>
                                            <label class="modal-label" for="insight-primary-category"
                                                value="Primary Category">
                                                Primary Category
                                            </label>
                                            <input class="modal-entry" id="insight-primary-category" type="text"
                                                name="primary-category" placeholder="Primary Category...">
                                            </input>
                                        </td>
                                        <td>
                                        <td>
                                            <label class="modal-label" for="insight-fic" value="FIC">
                                                FIC
                                            </label>
                                            <input class="modal-entry" id=insight-fic" type="text" name="FIC"
                                                placeholder="FIC...">
                                            </input>

                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <p></p>
                            <div>
                                <div style="border: 1px solid rgba(0,0,0, 0.2); padding:4px; height:275px;"> 
                                    <label class="modal-label" style="float:left">
                                        Keywords
                                    </label>
                                    <input id="add-insight-keywords" type="image"
                                    src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                    style="height:24px; width:24px; float: right">
                                    <hr style="width:100%; margin-top:30px;"></hr>
                                    <div id="insight-keyword-container" style="width:100%; height:224px; font-size:14px; margin-top:-4px; border: 1px solid rgba(0,0,0, 0.2); overflow:auto;">
                                        <div id="insight-keywords" class="keyword-container"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tabcontent background-opaque" id="insight-observations"
                            style="left:10px;  top:360px; right:10px; bottom:45px; position:absolute;">
                            
                            <div style="padding:4px; height:32px; margin-top:-4px;"> 
                                <input id="add-lesson-track" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; float: right">
                            </div>

                            <div class="tableFixHead" style="height:375px; border: 1px solid rgba(0,0,0, 0.2); ">
                                <table id="insight-observations-table">
                                    <thead style="margin:4px; background-color: white;">
                                        <tr>
                                            <th class="th-sm">Date</th>
                                            <th class="th-sm">Title</th>
                                            <th class="th-sm" style="width:600px">Description</th>
                                            <th class="th-sm">Reference</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-view">
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="tabcontent background-opaque" id="insight-lessons"
                            style="left:10px; top:360px; right:10px; bottom:45px; position:absolute;">
                            <div style="padding:4px; height:32px; margin-top:-4px;"> 
                                <input id="add-lesson-track" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; float: right">
                            </div>

                            <div class="tableFixHead" style="height:375px; border: 1px solid rgba(0,0,0, 0.2); ">
                                <table id="insight-lessons-table">
                                    <thead style="margin:4px; background-color: white;">
                                        <tr>
                                            <th class="th-sm">Title</th>
                                            <th class="th-sm" style="width:600px">Description</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-view">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="tabcontent background-opaque" id="insight-tracking"
                            style="left:10px; top:360px; right:10px; bottom:45px; position:absolute;">
                            <div style="padding:4px; height:32px; margin-top:-4px;"> 
                                <input id="add-lesson-track" type="image"
                                src="{{url_for( 'static', filename='images/add-icon.svg')}}"
                                style="height:24px; width:24px; float: right">
                            </div>

                            <div class="tableFixHead" style="height:375px; border: 1px solid rgba(0,0,0, 0.2); ">
                              <table id="insight-tracking-table">
                                    <thead style="margin:4px; background-color: white;">
                                        <tr>
                                            <th class="th-sm">Date</th>
                                            <th class="th-sm">Name</th>
                                            <th class="th-sm" style="width:600px">Comments</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-view">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="position:absolute; bottom:0px; left:10px; margin-top:30px; margin:10px;">
                    <button class="modal-btn" id="update-insight">Save</button>
                    <button class="closeButton modal-cancel-btn" id="cancel-insight">Cancel</button>
                </div>
            </div>
        </div>
    </dialog>

    <div style="overflow:hidden; user-select: none;">
        <div style="overflow:hidden;">

            <div id="toolbar"
                style="position: absolute; top:0px; left:0px; right:0px; height:36px; -webkit-app-region: drag;">
                <div style="position: absolute; top:5px; left:0px; padding-right:0px;">
                    <img src="{{ url_for( 'static', filename='images/soldier.png' ) }}" width="32" height="32" />
                </div>
                <div style="position: absolute; top:-4px; left:36px; padding-right:0px;">
                    <h1>Army Lessons Online</h1>
                </div>

                <div style="position:absolute; top:5px; right:2px; width:35px;">
                    <a id="connect-couchdb" style="position:absolute; left:2px; top:2px; " class="menu-item">
                        <img src="{{ url_for( 'static', filename='images/connect.svg' ) }}" width="28" height="28" />
                    </a>
                </div>

            </div>

            <div id="search-arguments"
                style="position:absolute; top:44px; left:10px; width:440px; bottom:40px; border: 1px solid rgba(0,0,0, 0.2); padding:4px; overflow:hidden;">
                <button class="collapsible">Search</button>
                <div class="collapsible-content" style="margin-top:4px; margin-bottom:12px;">
                    <table class="selection" style="margin-top: 4px;">
                        <tr>
                            <td>
                                <img src="{{ url_for( 'static', filename='images/repository.svg')}}"
                                    style="width:24px; height:24px; margin-right:4px;"></img>
                                <label style="position:relative; top:-6px;"><b>Repository Selection</b></label>
                            </td>
                        </tr>
                        <tr style="position:relative; top:-6px;">
                            <td>
                                <input type="radio" id="search-documents" name="corpus" value="search-documents"
                                    checked="checked">
                                <label style="position:relative; top:-4px;" for="corpus">Documents</label><br>
                                <input type="radio" id="search-observations" name="corpus" value="search-observations">
                                <label style="position:relative; top:-4px;"
                                    for="search-observations">Observations</label><br>
                                <input type="radio" id="search-lessons" name="corpus" value="search-lessons">
                                <label style="position:relative; top:-4px;" for="search-lessons">Lessons</label><br>
                                <input type="radio" id="search-insights" name="corpus" value="search-insights">
                                <label style="position:relative; top:-4px;" for="search-insights">Insights</label><br>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <hr style="width:100%; margin-top:-2px;">
                                </hr>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label class="modal-label" for="search-start-date" value="search-start-date">
                                    Start Date
                                </label>
                                <input class="search-date" style="height:28px;" id="search-start-date" type="date"
                                    name="search-start-date">
                                </input>
                            </td>
                        <tr>
                            <td>
                                <label class="modal-label" for="search-end-date" value="search-end-date">
                                    End Date
                                </label>
                                <input class="search-date" style="height:28px;" id="search-end-date" type="date"
                                    name="search-end-date">
                                </input>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <hr style="width:100%;  margin-top:4px;">
                                </hr>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div style="height: 13px; font-family: sans-serif; font-size: 12px; margin-top:-12px; height:32px;">
                                    <input class="search-checkbox" id="search-hot-topics" type="checkbox" name="hot-topic" checked>
                                        Hot Topics Only
                                    </input>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
                <button class="collapsible">Actions</button>
                <div class="collapsible-content" style="margin-top:4px; margin-bottom:12px;">
                    <table style="margin-top: 4px;">
                        <tr>
                            <td>
                                <button class="collapsible-menu" id="add-document">
                                    <img src="{{url_for( 'static', filename='images/add-file.svg')}}"
                                        style="width:24px; height:24px; margin-top:2px; margin-right:4px;"></img>
                                    <label for="add-document" style="position:relative; top:-6px;">Add a
                                        Document</label>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button class="collapsible-menu" id="add-observation">
                                    <img src="{{url_for( 'static', filename='images/add-observation.svg')}}"
                                        style="width:24px; height:24px; margin-top:2px;margin-right:4px;"></img>
                                    <label for="add-observation" style="position:relative; top:-6px;">Add an
                                        Observation</label>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button class="collapsible-menu" id="add-lesson">
                                    <img src="{{url_for( 'static', filename='images/add-lesson.svg')}}"
                                        style="width:24px; height:24px; margin-top:2px; margin-right:4px;"></img>
                                    <label for="add-lesson" style="position:relative; top:-6px;">Add a Lesson</label>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button class="collapsible-menu" id="add-insight">
                                    <img src="{{url_for( 'static', filename='images/add-insight.svg')}}"
                                        style="width:24px; height:24px; margin-top:2px; margin-right:4px;"></img>
                                    <label for="add-insight" style="position:relative; top:-6px;">Add an Insight</label>
                                </button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div id="container"
                style="position:absolute; top:44px; left:460px; right:595px; bottom:40px; border: 1px solid rgba(0,0,0, 0.2); overflow:hidden;">
                <div id="search-argument-container" style="position:absolute; top:10px;  left:10px; height:28px; right:50px;">
                    <input id=search-argument style="height:28px; width:100%; background-color: rgba(230, 255, 255, 0.5);" placeholder="Search Documents..."></input>
                </div>

                <div class="search" id="search-database" style="position:absolute; top:6px;  height:36px; width:32px; right:6px;">
                    <img src="{{url_for( 'static', filename='images/search.svg')}}"
                        style="height:24px; width:28px; margin-left:2px; margin-top:5px;"></img>
                </div>

                <div style="height:4px; margin-top:48px;">
                    <hr style="width:100%">
                    </hr>
                </div>

                <div id="search-table"
                    style="position:absolute; display:none; left:2px; top:48px; bottom:2px; right:2px; overflow:none; font-family: sans-serif; font-size: 12px; padding:5px; ;">
                </div>
            </div>
            <div id="details" class="details"
                style="position:absolute; top:44px; right:10px; width:575px; bottom: 40px; border: 1px solid rgba(0,0,0, 0.2); overflow:hidden;">
            </div>
            <div id="couchdb-status" class="status-message" style="position:absolute; bottom:10px; right:6px;">
            </div>
        </div>
    </div>

</body>

<script src="{{ url_for('static', filename='javascripts/main.js') }}"></script>

</html